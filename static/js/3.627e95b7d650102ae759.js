webpackJsonp([3,12],{"6M50":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),r=n("Dd8w"),s=n.n(r),o=n("exGp"),u=n.n(o),c=n("pDNl"),l=n("pH5C"),d=n("LQ3F"),f=n("Zrlr"),v=n.n(f),m=n("wxAW"),h=n.n(m),p=function(){function e(t,n,a,i,r){v()(this,e),this.totalTime=t,this.interval=a||e.DEFAULT_INTERVAL,this.onUpdate=n,this.onEnd=i,this.onStart=r}return h()(e,[{key:"start",value:function(){var e=this,t=(new Date).getTime(),n=this.totalTime,a=this.interval,i=this.onStart;if(i&&"function"==typeof i){var r=i();if(r&&"boolean"==typeof r)return}this.timer=setInterval(function(){var a=(new Date).getTime(),i=(1e3*n-a+t)/1e3;e.update(i),i<=0&&e.end()},1e3*a)}},{key:"end",value:function(){var e=this.onEnd;e&&"function"==typeof e&&e(),this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"update",value:function(e){var t=this.onUpdate;t&&"function"==typeof t&&t(e)}}]),e}();p.DEFAULT_INTERVAL=1;var g=p,_=(c.a,l.default,d.default,{name:"login-verify-code-screen",components:{XInput:c.a,OfoCarNumInput:l.default,OfoErrorMsg:d.default},data:function(){return{code:"",codeLength:4,params:{},remain:30,isLogin:!this.$route.params.email,countDown:null,errorMsg:""}},methods:{onGoClick:function(){this.isLogin?this.login():this.register()},login:function(){var e=this;return u()(i.a.mark(function t(){var n,a,r,o,u,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.code,a=e.params,t.prev=1,e.$loading.show(),t.next=5,e.$store.dispatch("login",s()({},a,{code:n}));case 5:r=t.sent,o=r.OK,u=r.msg,e.$loading.hide(),o?(c=e.$route.query.to,$app.goAndReplace({name:c||"HomeScreen"},-1)):e.errorMsg=u,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),e.$loading.hide(),e.$toast.text(t.t0);case 16:case"end":return t.stop()}},t,e,[[1,12]])}))()},register:function(){var e=this;return u()(i.a.mark(function t(){var n,a,r,o,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.code,a=e.params,t.prev=1,e.$loading.show(),t.next=5,$API.ofo.register(s()({},a,{code:n}));case 5:r=t.sent,o=r.OK,u=r.msg,e.$loading.hide(),o?(e.$store.commit("setIsDeviceRegister",!0),e.$router.go(-1),e.$toast.text("注册成功，请登录")):e.errorMsg=u,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),e.$loading.hide(),e.$toast.text(t.t0);case 16:case"end":return t.stop()}},t,e,[[1,12]])}))()},sendAgain:function(){var e=this;return u()(i.a.mark(function t(){var n,a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.$loading.show(),e.errorMsg="",t.next=5,$API.ofo.getVerifyCode(s()({},e.params,{type:e.isLogin?1:0}));case 5:n=t.sent,a=n.OK,r=n.msg,e.$loading.hide(),a?(e.remain=30,e.countDown.totalTime=e.remain,e.countDown.start()):e.errorMsg=r,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),e.$loading.hide(),e.$toast.text(t.t0);case 16:case"end":return t.stop()}},t,e,[[0,12]])}))()}},mounted:function(){var e=this;this.countDown=new g(this.remain,function(t){t=Math.round(t),e.remain=t<0?0:t}),this.countDown.start()},created:function(){this.params=this.$route.params}}),y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"verify_code_screen"},[a("img",{staticClass:"back_image",attrs:{src:n("Z0bJ")}}),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"title"},[e._v("\n      Enter the verification code sent to you at\n      "),a("span",{staticClass:"cellphone"},[e._v(e._s(e.params.tel||""))])]),e._v(" "),a("ofo-car-num-input",{attrs:{length:e.codeLength},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.remain,expression:"remain"}],staticClass:"summary"},[e._v("\n      Send again in "+e._s(e.remain)+"s\n    ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.remain,expression:"!remain"}]},[a("div",{staticClass:"send_again",on:{click:e.sendAgain}},[e._v("\n        Send again\n      ")]),e._v(" "),a("div",{staticClass:"check_alert"},[e._v("请检查电话是否错误")])]),e._v(" "),a("ofo-error-msg",{attrs:{message:e.errorMsg}}),e._v(" "),a("x-button",{staticClass:"go_button",attrs:{type:"primary",disabled:e.code.length!==e.codeLength},nativeOn:{click:function(t){return e.onGoClick(t)}}},[e._v("Go")])],1)])},staticRenderFns:[]};var w=n("VU/8")(_,y,!1,function(e){n("pl+g")},"data-v-81f708a4",null);t.default=w.exports},"9bBU":function(e,t,n){n("mClu");var a=n("FeBl").Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},C4MV:function(e,t,n){e.exports={default:n("9bBU"),__esModule:!0}},FwLz:function(e,t){},Z0bJ:function(e,t,n){e.exports=n.p+"static/images/login-back@2x.2ce35de.png"},Zrlr:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},mClu:function(e,t,n){var a=n("kM2E");a(a.S+a.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},pH5C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});String,Number,Number;var a={props:{value:String|Number|void 0,length:{type:Number,default:4}},data:function(){return{myValue:""}},computed:{myValues:function(){return this.myValue.split("")}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}},methods:{click:function(){this.$refs.input.focus()},isActivated:function(e){var t=this.myValue||"";return t.length===e-1||t.length===this.length&&e===this.length}},mounted:function(){this.$refs.input.focus()},created:function(){window.length=this.length,this.myValue=this.value}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ofo_car_num_input",on:{click:e.click}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.myValue,expression:"myValue"}],ref:"input",attrs:{type:"number",oninput:"\n    if (value.length > length) {\n      value = value.slice(0, length)\n    }"},domProps:{value:e.myValue},on:{input:function(t){t.target.composing||(e.myValue=t.target.value)}}}),e._v(" "),n("ul",{staticClass:"digits"},e._l(e.length,function(t){return n("li",{key:t,class:{digit:!0,activated:e.isActivated(t)}},[e._v(e._s(e.myValue.length>=t?e.myValues[t-1]:""))])}))])},staticRenderFns:[]};var r=n("VU/8")(a,i,!1,function(e){n("FwLz")},"data-v-4cb07368",null);t.default=r.exports},"pl+g":function(e,t){},wxAW:function(e,t,n){"use strict";t.__esModule=!0;var a,i=n("C4MV"),r=(a=i)&&a.__esModule?a:{default:a};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()}});
//# sourceMappingURL=3.627e95b7d650102ae759.js.map